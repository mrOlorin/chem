{"version":3,"sources":["webpack:///./src/components/NuclideList.vue?2a18","webpack:///./src/components/NuclideList.vue?23d2","webpack:///./src/components/NuclideList.vue","webpack:///./src/components/NuclideList.vue?bb57","webpack:///./src/components/NuclideList.vue?f572"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","nuclidesCount","_l","isotopes","i","key","nuclide","j","_e","staticRenderFns","console","time","multiThree","MultiThree","$refs","scene","timeEnd","initScenes","addEventListeners","stopRender","removeEventListeners","chunkSize","progressBar","progress","backgroundColor","nuclides","isotope","el","document","getElementById","Z","N","mesh","NuclideMesh","background","add","addScene","tick","value","Promise","requestAnimationFrame","hidden","$el","addEventListener","onWheel","removeEventListener","e","f","scrollWidth","scrollHeight","preventDefault","window","scrollBy","deltaY","Array","Number","components","NuclideInfo","component"],"mappings":"kHAAA,yBAAkd,EAAG,G,yCCArd,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,SAAS,CAACG,IAAI,UAAUH,EAAG,WAAW,CAACG,IAAI,WAAWC,MAAM,CAAC,MAAQ,qBAAqB,MAAQ,IAAI,IAAMR,EAAIS,iBAAiBL,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,UAAUR,EAAIU,GAAIV,EAAY,UAAE,SAASW,EAASC,GAAG,OAAOR,EAAG,KAAK,CAACS,IAAID,GAAGZ,EAAIU,GAAG,GAAW,SAASI,EAAQC,GAAG,OAAOX,EAAG,KAAK,CAACS,IAAIE,EAAEP,MAAM,CAAC,GAAM,WAAaI,EAAI,IAAMG,IAAK,CAAC,EAAUX,EAAG,MAAM,CAACA,EAAG,cAAc,CAACI,MAAM,CAAC,GAAM,YAAeM,EAAS,EAAI,IAAOA,EAAS,IAAK,CAACV,EAAG,cAAc,CAACI,MAAM,CAAC,QAAUM,MAAY,IAAI,GAAGd,EAAIgB,UAAS,MAAK,MAC9nBC,EAAkB,G,wGC2BtB,IAAqB,EAArB,cAAyC,OAK/B,gBACNC,QAAQC,KAAK,kBACblB,KAAKmB,WAAa,IAAIC,EAAA,KAAWpB,KAAKqB,MAAMC,OAC5CL,QAAQM,QAAQ,kBAChBvB,KAAKwB,WAAW,IAChBxB,KAAKyB,oBAGC,sBACNzB,KAAKmB,WAAWO,aAChB1B,KAAK2B,uBAGC,iBAAkBC,GACxBX,QAAQC,KAAK,oBACb,IAAIP,EAAI,EACR,MAAMkB,EAAc7B,KAAKqB,MAAMS,SACzBC,EAAkB,IAAI,OAAY,EAAG,EAAG,GAC9C,IAAK,MAAMrB,KAAYV,KAAKgC,SAC1B,GAAKtB,EACL,IAAK,MAAMuB,KAAWvB,EAAU,CAC9B,IAAKuB,EAAS,SACd,MAAMC,EAAyBC,SAASC,eAAe,WAAWH,EAAQI,KAAKJ,EAAQK,KACvF,IAAKJ,EAAI,SACT,MAAMK,EAAO,IAAIC,EAAA,KAAYP,EAAS,GAAI,KACpCX,EAAQ,IAAI,OAClBA,EAAMmB,WAAaV,EACnBT,EAAMoB,IAAIH,GACVvC,KAAKmB,WAAWwB,SAASrB,EAAOY,EAAIK,EAAKK,MACrCjC,IAAMiB,IAAc,IACtBC,EAAYgB,MAAQlC,QACd,IAAImC,QAAQC,wBAIxBlB,EAAYmB,QAAS,EACrB/B,QAAQM,QAAQ,oBAGV,oBACNvB,KAAKiD,IAAIC,iBAAiB,QAASlD,KAAKmD,SAGlC,uBACNnD,KAAKiD,IAAIG,oBAAoB,QAASpD,KAAKmD,SAGrC,QAASE,GACf,MAAMC,EAAItD,KAAKiD,IAAIM,YAAevD,KAAKiD,IAAIO,aAC3CH,EAAEI,iBACFC,OAAOC,SAAUN,EAAiBO,OAASN,EAAID,EAAiBO,UAtDrD,gBAAZ,eAAKC,Q,+BACQ,gBAAb,eAAKC,S,oCAFa,EAAW,gBAH/B,eAAU,CACTC,WAAY,CAAEC,cAAA,SAEK,WC5BiX,I,wBCQlYC,EAAY,eACd,EACAnE,EACAkB,GACA,EACA,KACA,KACA,MAIa,aAAAiD,E","file":"js/chunk-4c0e280c.54bf65ef.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NuclideList.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NuclideList.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nuclide-list\"},[_c('canvas',{ref:\"scene\"}),_c('progress',{ref:\"progress\",attrs:{\"title\":\"Инициализация сцен\",\"value\":\"0\",\"max\":_vm.nuclidesCount}}),_c('table',{attrs:{\"id\":\"table\"}},_vm._l((_vm.nuclides),function(isotopes,i){return _c('tr',{key:i},_vm._l((isotopes),function(nuclide,j){return _c('td',{key:j,attrs:{\"id\":(\"isotope-\" + i + \"-\" + j)}},[(nuclide)?_c('div',[_c('router-link',{attrs:{\"to\":(\"/nuclide/\" + (nuclide.Z) + \"-\" + (nuclide.N))}},[_c('NuclideInfo',{attrs:{\"nuclide\":nuclide}})],1)],1):_vm._e()])}),0)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport * as THREE from 'three';\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport Nucleus from '@/chem/Nucleus';\r\nimport NuclideMesh from '@/chem/NuclideMesh';\r\nimport MultiThree from '@/MultiThree';\r\nimport NuclideInfo from '@/components/NuclideInfo.vue';\r\n\r\n@Component({\r\n  components: { NuclideInfo }\r\n})\r\nexport default class NuclideList extends Vue {\r\n  @Prop(Array) private nuclides!: Array<Array<Nucleus>>;\r\n  @Prop(Number) private nuclidesCount!: number;\r\n  private multiThree!: MultiThree;\r\n\r\n  private async mounted () {\r\n    console.time('Рендерер готов');\r\n    this.multiThree = new MultiThree(this.$refs.scene as HTMLCanvasElement);\r\n    console.timeEnd('Рендерер готов');\r\n    this.initScenes(10);\r\n    this.addEventListeners();\r\n  }\r\n\r\n  private async beforeDestroy () {\r\n    this.multiThree.stopRender();\r\n    this.removeEventListeners();\r\n  }\r\n\r\n  private async initScenes (chunkSize: number): Promise<void> {\r\n    console.time('Все сцены готовы');\r\n    let i = 0;\r\n    const progressBar = this.$refs.progress as HTMLProgressElement;\r\n    const backgroundColor = new THREE.Color(1, 1, 1);\r\n    for (const isotopes of this.nuclides) {\r\n      if (!isotopes) continue;\r\n      for (const isotope of isotopes) {\r\n        if (!isotope) continue;\r\n        const el: HTMLElement | null = document.getElementById(`isotope-${isotope.Z}-${isotope.N}`);\r\n        if (!el) continue;\r\n        const mesh = new NuclideMesh(isotope, 12, 1.5);\r\n        const scene = new THREE.Scene();\r\n        scene.background = backgroundColor;\r\n        scene.add(mesh);\r\n        this.multiThree.addScene(scene, el, mesh.tick);\r\n        if (i++ % chunkSize === 0) {\r\n          progressBar.value = i;\r\n          await new Promise(requestAnimationFrame);\r\n        }\r\n      }\r\n    }\r\n    progressBar.hidden = true;\r\n    console.timeEnd('Все сцены готовы');\r\n  }\r\n\r\n  private addEventListeners () {\r\n    this.$el.addEventListener('wheel', this.onWheel);\r\n  }\r\n\r\n  private removeEventListeners () {\r\n    this.$el.removeEventListener('wheel', this.onWheel);\r\n  }\r\n\r\n  private onWheel (e: Event) {\r\n    const f = this.$el.scrollWidth / (this.$el.scrollHeight);\r\n    e.preventDefault();\r\n    window.scrollBy((e as WheelEvent).deltaY * f, (e as WheelEvent).deltaY);\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NuclideList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NuclideList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NuclideList.vue?vue&type=template&id=7ee4fe1e&\"\nimport script from \"./NuclideList.vue?vue&type=script&lang=ts&\"\nexport * from \"./NuclideList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NuclideList.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}